<center><h2>Votre tableau de bord</h2></center>

<div class="container">
	<div class="row">

		<div class="procedures-subblock col-md-7">
			<div class="card">
				<div class="card-header text-center"><h4>Procédures</h4>
        </div>
				<div class="card-body">
          <div class="card-header padding-zero">En attente</div>
            <% @procedures.each do |procedure| %>
              <% if procedure.status == "pending" %>
						    <ul class="list-group list-group-flush">
                  <li class="list-group-item list-procedure"><%= procedure.service.title %>
                    <%= procedure.date %>
                  <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#Modal<%= procedure.id %>">Détails</button>
                    <div class="modal fade" id="Modal<%= procedure.id %>" tabindex="-1" role="dialog" aria-labelledby="Modal-<%= procedure.id %>" aria-hidden="true">
                      <div class="modal-dialog modal-dialog-centered" role="document">
                        <div class="modal-content">
                          <div class="modal-header">
                            <h5 class="modal-title" id="Modal-<%= procedure.id %>Label"><%= procedure.service.title %></h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                              <span aria-hidden="true">&times;</span>
                            </button>
                          </div>
                          <div class="modal-body">
                            <%= procedure.grievance %>
                          </div>
                          <div class="modal-footer">
                            <%= link_to "Refuser", refuse_path(procedure), method: :patch, class: "btn btn-outline-danger" %>
                            <%= link_to "Accepter", accept_path(procedure), method: :patch, class: "btn btn-outline-success" %>
                          </div>
                        </div>
                      </div>
                    </div>
                  </li>
                </ul>
              <% end %>
            <% end %>

          <div class="card-header padding-zero">En cours</div>
              <% @procedures.each do |procedure| %>
                <% if procedure.status == "accepted" %>
    						  <ul class="list-group list-group-flush">
                    <li class="list-group-item list-procedure"><%= procedure.service.title %> | <%= procedure.date %>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#ProcedureModal<%= procedure.id %>">Détails</button>
                      <div class="modal fade" id="ProcedureModal<%= procedure.id %>" tabindex="-1" role="dialog" aria-labelledby="ProcedureModal-<%= procedure.id %>" aria-hidden="true">
                        <div class="modal-dialog modal-dialog-centered" role="document">
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="ProcedureModal-<%= procedure.id %>"><%= procedure.service.title %></h5>
                              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                              </button>
                            </div>
                            <div class="modal-body">
                              <%= procedure.grievance %>
                            </div>
                            <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </li>
                  </ul>
                <% end %>
					    <% end %>
				    </div>
			</div>
		</div>

    <div class="col-md-5">
      <div class="profile-block mb-4">
			<div class="card-product fixxed">
				<%= image_tag "saul.jpg", class:"lawyer-avatar"%>
				<div class="card-product-infos">
					<h3>Saul Goodman</h3>
					<p>Avocat chez <strong>Saul Goodman & Associates.</strong></p>
					<div class="d-flex">
						<p><%= image_tag "location.svg", class:"location" %> Albuquerque, Nouveau Mexique</p>
					</div>
					<a href="#" class="badge badge-primary">Droit pénal</a>
					<a href="#" class="badge badge-secondary">Droit de la famille</a>
					<a href="#" class="badge badge-light">Droit fiscal</a>
				</div>
			</div>
		  </div>
      <div class="services-subblock">
      <% if @services %>
      <div class="card">
        <div class="card-header">
            Vos prestations :
        </div>
          <% @services.each do |service| %>
          <ul class="list-group list-group-flush">
            <li class="list-group-item">
              <div class="d-flex justify-content-between">
                <div>
                  <h6><%= service.title %></h6>
                  <p><small><%= service.category %></small></p>
                </div>
                <div>
                  <h6><%= service.duration %> semaines</h6>
                  <h6><%= service.price %>€</h6>
                </div>
              </div>
              <%= link_to 'Edit', edit_service_path(service) %>
              <%= link_to 'Destroy', service, method: :delete, data: { confirm: 'Êtes vous sur de vouloir supprimer cette prestation?' } %>
            </li>
          </ul>
          <% end %>
            <li class="list-group-item"><%= link_to 'Nouvelle prestation', new_service_path %>
            </li>
        </div>
      <% end %>
      </div>
    </div>
  </div>


</div>
